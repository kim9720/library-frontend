$(function() {
    "use strict";

    $(".preloader").fadeOut();

    $(".left-sidebar").hover(
        function() {
            $(".navbar-header").addClass("expand-logo");
        },
        function() {
            $(".navbar-header").removeClass("expand-logo");
        }
    );

    $(".nav-toggler").on('click', function() {
        $("#main-wrapper").toggleClass("show-sidebar");
        $(".nav-toggler i").toggleClass("ti-menu");
    });

    $(".nav-lock").on('click', function() {
        $("body").toggleClass("lock-nav");
        $(".nav-lock i").toggleClass("mdi-toggle-switch-off");
        $(window).trigger("resize");
    });

    $(".search-box a, .search-box .app-search .srh-btn").on('click', function() {
        $(".app-search").toggle(200);
        $(".app-search input").focus();
    });

    $(".service-panel-toggle").on('click', function(e) {
        e.stopPropagation(); // Prevents event propagation to the page wrapper
        $(".customizer").toggleClass('show-service-panel');
    });

    $('.page-wrapper').on('click', function() {
        $(".customizer").removeClass('show-service-panel');
    });

    $('.floating-labels .form-control').on('focus blur', function(e) {
        $(this).parents('.form-group').toggleClass('focused', (e.type === 'focus' || this.value.length > 0));
    }).trigger('blur');



    $('.message-center, .customizer-body, .scrollable').perfectScrollbar({
        wheelPropagation: !0
    });

    $(window).on("resize", function() {
        var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;

        if (width < 1170) {
            $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
        } else {
            $("#main-wrapper").attr("data-sidebartype", "full");
        }
    }).trigger('resize');

    $(".list-task li label").click(function() {
        $(this).toggleClass("task-done");
    });

    $('.sidebartoggler').on("click", function() {
        $("#main-wrapper").toggleClass("mini-sidebar");
        if ($("#main-wrapper").hasClass("mini-sidebar")) {
            $(".sidebartoggler").prop("checked", true);
            $("#main-wrapper").attr("data-sidebartype", "mini-sidebar");
        } else {
            $(".sidebartoggler").prop("checked", false);
            $("#main-wrapper").attr("data-sidebartype", "full");
        }
    });
});
